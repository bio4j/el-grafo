<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>PathString</title>
        
        <script src="scripts/lib/d3.js" charset="utf-8"></script>
        <script src="scripts/lib/dagre-d3.js"></script>

        <style type="text/css">
            /* No style rules here yet */       
        </style>
    </head>
    <body>
        <script type="text/javascript">

            //TO DO: A function that generate those modified paths!!
            var SubontolyPath = "M101,115.2109375L110.86249999999998,110.82978515624998C120.725,106.4486328125,140.45,97.68632812499999,158.11666666666667,93.19283854166666C175.78333333333333,88.69934895833333,191.39166666666665,88.47467447916665,199.19583333333333,88.36233723958333L207,88.25";

            console.log("SubontolyPath", SubontolyPath);

			var patronNums = /[^\d^.]/;
			var patronSymbols = /\d+\.?/;



            //Case MANY-MANY

            // Divide la cadena en piezas separadas por el patr√≥n anterior y
            // almacena las piezas en un arreglo llamado PathList
            var PathListNums = SubontolyPath.split(patronNums);
            // console.log("PathListNums", PathListNums);

            var SubontolyPath2 = SubontolyPath.replace(/\./g,'');
            var PathListSymbols = SubontolyPath2.split(patronSymbols);
            var i, longitud;
            for (i = 0, longitud = PathListSymbols.length; i < longitud; i++){
            // var PathListNumsManyMany = SubontolyPath.split(patronNums);

                if (i%2 == 0 ) {
                    PathListNums[i] -= -3;
                }
                else {
                    PathListNums[i] =  PathListNums[i]; 
                }
            }

			var SubontolyPathManyMany = "";
            for (i = 1, longitud = PathListSymbols.length; i < longitud; i++){
				SubontolyPathManyMany = SubontolyPathManyMany+PathListSymbols[i-1]+PathListNums[i];
			}

			console.log("SubontolyPathManyMany", SubontolyPathManyMany);
			
            // The expected result is:
            // SubontolyPathDown c= "M101,118.2109375L110.86249999999998,113.82978515624998C120.725,109.4486328125,140.45,97.68632812499999,158.11666666666667,93.19283854166666C175.78333333333333,88.69934895833333,191.39166666666665,88.47467447916665,199.19583333333333,88.36233723958333L207,88.25";


////////////

             
            //Case MANY-ONE
            var PathListNums2 = SubontolyPath.split(patronNums);
            var offset = 3;
            var n = 7;
            // 2 steps: n=5
            // 3 steps: n=7
            // 4 steps; n=9

            var SubontolyPath2 = SubontolyPath.replace(/\./g,'');
            var PathListSymbols = SubontolyPath2.split(patronSymbols);
            var i, longitud;
            for (i = 0, longitud = PathListSymbols.length; i < longitud; i++){
                if ((i%2 == 0) && (i<n)) {
                    PathListNums2[i] -= -3;
                }
                else {
                    PathListNums2[i] =  PathListNums2[i]; 
                }
            }


            var SubontolyPathManyOne = "";
            for (i = 1, longitud = PathListSymbols.length; i < longitud; i++){
                SubontolyPathManyOne = SubontolyPathManyOne+PathListSymbols[i-1]+PathListNums2[i];
            }

            console.log("SubontolyPathManyOne", SubontolyPathManyOne);
 
 ////////////

             
            //Case ONE-MANY
            var PathListNums3 = SubontolyPath.split(patronNums);
            var offset = 3;
            var n = 7;
            // 2 steps: n=5
            // 3 steps: n=7
            // 4 steps; n=9

            var SubontolyPath2 = SubontolyPath.replace(/\./g,'');
            var PathListSymbols = SubontolyPath2.split(patronSymbols);
            var i, longitud;
            for (i = 0, longitud = PathListSymbols.length; i < longitud; i++){
                if ((i%2 == 0) && (i>(PathListSymbols.length-n))) {
                    PathListNums3[i] -= -3;
                }
                else {
                    PathListNums3[i] =  PathListNums3[i]; 
                }
            }


            var SubontolyPathOneMany = "";
            for (i = 1, longitud = PathListSymbols.length; i < longitud; i++){
                SubontolyPathOneMany = SubontolyPathOneMany+PathListSymbols[i-1]+PathListNums3[i];
            }

            console.log("SubontolyPathOneMany", SubontolyPathOneMany);           


////////////

        </script>
    </body>
</html>